# 注意事项

- [脚本参数](#脚本参数)
- [命名规范](#命名规范)
- [函数定义](#函数定义)
- [函数引用](#函数引用)
- [私有脚本](#私有脚本)
- [工具依赖](#工具依赖)
- [私有配置](#私有配置)
- [编程语法](#编程语法)

### 脚本参数
NOX 要求脚本的每一个参数都要有一个对应选项，从而能够充分利用自动补全功能来简化脚本的使用。

### 命名规范
目录名称和脚本名称使用 **数字、字母、`-`** 进行组合，命名应尽可能短。

### 函数定义
函数定义时建议在函数名之前加上关键字 `function`。

私有函数名建议使用 `_` 作为前缀。

一个脚本中应该只有一个公有函数。

### 函数引用
假如 `ace.sh` 脚本中需要引用其他脚本的功能，如：`king.sh`，可以使用 `nox poker king` 的方式进行调用。

另一方面，`NOX_COMMON` 目录下包含了一系列脚本，这些脚本中定义了一系列的工具方法。假如 `ace.sh` 脚本中需要引用这里面的一些工具方法，可以在调用工具方法之前执行 `source` 命令导入包含该工具方法的脚本文件。

### 私有脚本
NOX 仓库中的 `.gitignore` 文件声明 git 会忽略以 `_` 为前缀的子目录或脚本。假如我们希望 `poker` 作为私有子命令集合，我们可以将 `poker` 改为 `_poker`，那么其目录下的所有脚本都会变成你的私有脚本。同时也能够享有自动补全的功能。只不过，命令的调用也将发生变化，如：`nox _poker ace`。

### 工具依赖
`nox/config/brewspec.yaml` 是一个依赖描述文件，如果你的脚本依赖了某个 brew 工具，需要在此文件中进行描述。NOX 在安装或更新时会检查并安装该文件中所描述的工具。

假如 `ace.sh` 脚本中需要依赖其他的一些工具，而这些工具是需要通过 `brew` 进行安装的，那么我们可以在 `NOX_CONFIG` 的 `brewspec.yaml` 文件中声明所依赖的工具。当用户执行 `nox system update` 时，NOX 会检查并安装 `brewspec.yaml` 中所定义的工具。

### 私有配置
`nox/config/config.yaml` 是一个私有配置文件，该文件不会加入 git 管理。

假如 `ace.sh` 脚本中需要读取用户的私有配置，如用户的 `ldap` 信息，这些配置默认定义在 `NOX_CONFIG` 的 `config.yaml` 文件中，该文件不会被加入 git 管理。

### 编程语法
NOX 默认使用 zsh 执行脚本，因此开发者需要注意 zsh 的编程语法与传统的 bash 编程语法的区别。如：zsh 中数组是从 1 开始索引，而 bash 中数组是从 0 开始索引。